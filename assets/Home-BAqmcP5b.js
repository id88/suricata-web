import{d as nt,u as dt,a as rt,r as v,c as T,b as u,e as t,f as s,g as S,w as a,E as ut,h as ct,i as _t,j as ft,k as p,t as d,l as i,F as I,m as V,n as vt,o as n,p as pt,q as mt,s as gt,v as yt,x as bt,y as ht,z as wt,A as kt,B as E,C as zt,D as Ct,G as L,H as xt,I as Tt,J as St,K as It,L as Vt,M as Et,N as Dt,O as Bt,P as $t,Q as P,R as D,S as Pt,_ as Ut}from"./index-t3hrDPiS.js";/* empty css               *//* empty css                */const qt={class:"home-page"},At={class:"stats-section"},Rt={class:"stats-card flex items-center"},Mt={class:"stats-icon today"},Nt={class:"stats-text"},Lt={class:"stats-value"},Qt={class:"stats-card flex items-center"},Ft={class:"stats-icon volume"},Ht={class:"stats-text"},Kt={class:"stats-value"},Gt={class:"stats-card flex items-center"},jt={class:"stats-icon total"},Jt={class:"stats-text"},Ot={class:"stats-value"},Wt={class:"stats-card flex items-center"},Xt={class:"stats-icon server"},Yt={class:"stats-text"},Zt={class:"stats-value"},te={class:"card-header"},ee={class:"header-left"},se={class:"user-details-horizontal"},ae={class:"detail-item-horizontal"},le={class:"detail-icon-small"},oe={class:"detail-content-small"},ie={class:"detail-value-small ip-address"},ne={class:"detail-item-horizontal"},de={class:"detail-icon-small"},re={class:"detail-content-small"},ue={class:"detail-value-small location"},ce={class:"detail-item-horizontal"},_e={class:"detail-icon-small"},fe={class:"detail-content-small"},ve={class:"detail-value-small quota"},pe={class:"detail-item-horizontal"},me={class:"card-header-left"},ge={class:"table-container"},ye={key:0,class:"text-gray"},be={class:"alert-types"},he={key:1,class:"text-gray"},we={key:0,class:"pagination-container"},ke={class:"invite-dialog-content"},ze={class:"dialog-form"},Ce={key:0},xe={key:1},Te={key:0,class:"dialog-warning"},Se={key:1,class:"dev-invite-codes"},Ie={class:"dev-codes"},Ve={class:"dialog-footer"},Ee={key:0,class:"celebration-overlay"},De={class:"celebration-content"},Be={class:"celebration-icon"},$e={class:"celebration-message"},Pe={class:"fireworks"},Ue={class:"confetti"},qe=nt({__name:"Home",setup(Ae){const Q=vt(),c=dt(),m=rt(),_=v(""),y=v(!1),b=v(!1),B=v(!1),w=v(!1),h=v(1),g=v(10),F=T(()=>{const l=(h.value-1)*g.value,e=l+g.value;return m.userTrafficPackets.slice(l,e)}),U=T(()=>m.userTrafficPackets.length),H=l=>{h.value=l},K=l=>{g.value=l,h.value=1},G=()=>{if(c.userInfo.isVipUser){D.info("您的账户已经升级，无需再次使用邀请码");return}b.value=!0,_.value="",w.value=!1},k=v(null),q=T(()=>!1),j=T(()=>q.value?c.getAvailableInviteCodes():[]),A=async()=>{if(!_.value.trim()){D.warning("请输入邀请码");return}y.value=!0;try{const l=c.applyInviteCode(_.value);l.success?(b.value=!1,w.value=!1,k.value={quota:l.quota||0,description:l.description||""},await Pt(),B.value=!0,D.success({message:l.message,duration:3e3,showClose:!0}),setTimeout(()=>{B.value=!1,k.value=null},3500),_.value=""):(D.error(l.message),w.value=!0)}finally{y.value=!1}},J=l=>{Q.push(`/alert/${l}`)},O=l=>l===0?"text-gray":l>30?"text-danger":l>10?"text-warning":"text-success",W=l=>{switch(l){case"completed":return"success";case"analyzing":return"warning";case"failed":return"danger";default:return"info"}},X=l=>{switch(l){case"completed":return"已完成";case"analyzing":return"分析中";case"failed":return"失败";default:return"未知"}},Y=l=>{switch(l){case"analyzing":return"分析中";case"failed":return"分析失败";default:return"等待完成"}},Z=l=>{const r=[{left:"10%",top:"20%"},{left:"20%",top:"60%"},{left:"40%",top:"30%"},{left:"60%",top:"70%"},{left:"80%",top:"40%"},{left:"90%",top:"80%"}][l-1];return{left:r.left,top:r.top,animationDelay:`${(l-1)*.3}s`}},tt=l=>({transform:`rotate(${(l-1)*45}deg)`,animationDelay:`${l*.1}s`}),et=l=>{const e=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff"];return{left:`${Math.random()*100}%`,backgroundColor:e[l%e.length],animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`}};return(l,e)=>{var M,N;const r=ft,z=pt,st=ut,C=zt,$=Ct,R=ct,f=St,at=Tt,lt=Vt,ot=Dt,it=_t;return n(),u("div",qt,[t("section",At,[s(st,{gutter:20},{default:a(()=>[s(z,{lg:6},{default:a(()=>[t("div",Rt,[t("div",Mt,[s(r,{size:24},{default:a(()=>[s(i(mt))]),_:1})]),t("div",Nt,[e[5]||(e[5]=t("p",{class:"stats-label"},"今日已分析",-1)),t("p",Lt,d(i(m).statistics.todayAnalyzed),1),e[6]||(e[6]=t("p",{class:"stats-unit"},"个流量包",-1))])])]),_:1}),s(z,{lg:6},{default:a(()=>[t("div",Qt,[t("div",Ft,[s(r,{size:24},{default:a(()=>[s(i(gt))]),_:1})]),t("div",Ht,[e[7]||(e[7]=t("p",{class:"stats-label"},"今日已分析流量",-1)),t("p",Kt,d(i(m).statistics.todayTrafficVolume),1),e[8]||(e[8]=t("p",{class:"stats-unit"},"GB",-1))])])]),_:1}),s(z,{lg:6},{default:a(()=>[t("div",Gt,[t("div",jt,[s(r,{size:24},{default:a(()=>[s(i(yt))]),_:1})]),t("div",Jt,[e[9]||(e[9]=t("p",{class:"stats-label"},"累计已分析",-1)),t("p",Ot,d(i(m).statistics.totalAnalyzed.toLocaleString()),1),e[10]||(e[10]=t("p",{class:"stats-unit"},"个流量包",-1))])])]),_:1}),s(z,{lg:6},{default:a(()=>[t("div",Wt,[t("div",Xt,[s(r,{size:24},{default:a(()=>[s(i(bt))]),_:1})]),t("div",Yt,[e[11]||(e[11]=t("p",{class:"stats-label"},"累计已分析流量",-1)),t("p",Zt,d(i(m).statistics.totalTrafficVolume),1),e[12]||(e[12]=t("p",{class:"stats-unit"},"TB",-1))])])]),_:1})]),_:1})]),s(R,{class:"user-info-card"},{header:a(()=>[t("div",te,[t("div",ee,[s(r,{size:20,color:"#2563eb"},{default:a(()=>[s(i(xt))]),_:1}),e[13]||(e[13]=t("span",{class:"header-title"},"用户信息",-1))])])]),default:a(()=>[t("div",se,[t("div",ae,[t("div",le,[s(r,{size:18,color:"#6366f1"},{default:a(()=>[s(i(ht))]),_:1})]),t("div",oe,[e[14]||(e[14]=t("div",{class:"detail-label-small"},"IP地址",-1)),t("div",ie,d(i(c).userInfo.ip),1)])]),e[19]||(e[19]=t("div",{class:"detail-divider"},null,-1)),t("div",ne,[t("div",de,[s(r,{size:18,color:"#10b981"},{default:a(()=>[s(i(wt))]),_:1})]),t("div",re,[e[15]||(e[15]=t("div",{class:"detail-label-small"},"归属地",-1)),t("div",ue,d(i(c).userInfo.location),1)])]),e[20]||(e[20]=t("div",{class:"detail-divider"},null,-1)),t("div",ce,[t("div",_e,[s(r,{size:18,color:"#f59e0b"},{default:a(()=>[s(i(kt))]),_:1})]),t("div",fe,[e[16]||(e[16]=t("div",{class:"detail-label-small"},"今日剩余额度",-1)),t("div",ve,d(i(c).userInfo.remainingQuota)+" / "+d(i(c).userInfo.dailyQuota),1)])]),e[21]||(e[21]=t("div",{class:"detail-divider"},null,-1)),t("div",pe,[i(c).userInfo.isVipUser?(n(),E($,{key:1,type:"warning",size:"large",class:"vip-badge-inline"},{default:a(()=>[s(r,null,{default:a(()=>[s(i(L))]),_:1}),e[18]||(e[18]=p(" VIP用户 "))]),_:1})):(n(),E(C,{key:0,link:"",size:"small",onClick:G,class:"invite-btn-inline"},{default:a(()=>e[17]||(e[17]=[p(" 使用邀请码 ")])),_:1}))])])]),_:1}),s(R,{class:"records-card"},{header:a(()=>[t("div",me,[s(r,{size:20,color:"#2563eb"},{default:a(()=>[s(i(Et))]),_:1}),e[22]||(e[22]=t("span",{class:"header-title"},"我的上传记录",-1))])]),default:a(()=>[t("div",ge,[s(at,{data:F.value,style:{width:"100%"},"default-sort":{prop:"uploadTime",order:"descending"},stripe:"",class:"data-table"},{default:a(()=>[s(f,{prop:"filename",label:"文件名","min-width":"280","show-overflow-tooltip":"",sortable:""}),s(f,{prop:"fileSize",label:"文件大小",width:"120",sortable:""}),s(f,{prop:"uploadTime",label:"上传时间",width:"160",sortable:""}),s(f,{prop:"analysisTime",label:"分析耗时",width:"120",sortable:""}),s(f,{prop:"alertCount",label:"告警数量",width:"120",sortable:""},{default:a(o=>[o.row.status==="analyzing"?(n(),u("span",ye,"-")):(n(),u("span",{key:1,class:It(O(o.row.alertCount))},d(o.row.alertCount),3))]),_:1}),s(f,{prop:"alertTypes",label:"告警种类",width:"120",sortable:""},{default:a(o=>[t("span",be,d(o.row.alertTypes||0),1)]),_:1}),s(f,{label:"状态",width:"100"},{default:a(o=>[s($,{type:W(o.row.status),size:"small"},{default:a(()=>[p(d(X(o.row.status)),1)]),_:2},1032,["type"])]),_:1}),s(f,{label:"操作",width:"120",fixed:"right"},{default:a(o=>[o.row.status==="completed"?(n(),E(C,{key:0,type:"primary",link:"",size:"small",onClick:x=>J(o.row.id)},{default:a(()=>e[23]||(e[23]=[p(" 查看详情 ")])),_:2},1032,["onClick"])):(n(),u("span",he,d(Y(o.row.status)),1))]),_:1})]),_:1},8,["data"]),U.value>g.value?(n(),u("div",we,[s(lt,{"current-page":h.value,"onUpdate:currentPage":e[0]||(e[0]=o=>h.value=o),"page-size":g.value,"onUpdate:pageSize":e[1]||(e[1]=o=>g.value=o),"page-sizes":[10,20,50,100],total:U.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:K,onCurrentChange:H},null,8,["current-page","page-size","total"])])):S("",!0)])]),_:1}),s(it,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=o=>b.value=o),title:"",width:"400px","close-on-click-modal":!1,class:"invite-dialog","align-center":""},{footer:a(()=>[t("div",Ve,[s(C,{onClick:e[3]||(e[3]=o=>b.value=!1),size:"large"},{default:a(()=>e[26]||(e[26]=[p(" 稍后再说 ")])),_:1})])]),default:a(()=>[t("div",ke,[t("div",ze,[s(ot,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=o=>_.value=o),placeholder:"请输入邀请码",size:"large",maxlength:"10",disabled:i(c).isBlocked||y.value,onKeyup:Bt(A,["enter"])},null,8,["modelValue","disabled"]),s(C,{type:"success",size:"large",onClick:A,disabled:i(c).isBlocked||!_.value.trim(),loading:y.value,class:"invite-submit-btn"},{default:a(()=>[y.value?(n(),u("span",xe,"验证中...")):(n(),u("span",Ce,"激活邀请码"))]),_:1},8,["disabled","loading"])]),w.value?(n(),u("div",Te,[s(r,{size:16,color:"#f59e0b"},{default:a(()=>[s(i($t))]),_:1}),e[24]||(e[24]=t("span",null,"连续输入错误邀请码将被禁止访问",-1))])):S("",!0),q.value?(n(),u("div",Se,[e[25]||(e[25]=t("div",{class:"dev-title"},"开发模式 - 可用邀请码：",-1)),t("div",Ie,[(n(!0),u(I,null,V(j.value,o=>(n(),E($,{key:o.code,size:"small",type:"info",onClick:x=>_.value=o.code,style:{cursor:"pointer",margin:"2px"},title:o.description},{default:a(()=>[p(d(o.code)+" ("+d(o.quota)+"个) ",1)]),_:2},1032,["onClick","title"]))),128))])])):S("",!0)])]),_:1},8,["modelValue"]),B.value?(n(),u("div",Ee,[t("div",De,[t("div",Be,[s(r,{size:80,color:"#10b981"},{default:a(()=>[s(i(L))]),_:1})]),e[28]||(e[28]=t("h2",{class:"celebration-title"},"🎉 升级成功！",-1)),t("p",$e,[p(d(((M=k.value)==null?void 0:M.description)||"您的账户已成功升级"),1),e[27]||(e[27]=t("br",null,null,-1)),p(" 每日额度已提升至"+d(((N=k.value)==null?void 0:N.quota)||i(c).userInfo.dailyQuota)+"个！ ",1)])]),t("div",Pe,[(n(),u(I,null,V(6,o=>t("div",{class:"firework",key:o,style:P(Z(o))},[(n(),u(I,null,V(8,x=>t("div",{class:"firework-spark",key:x,style:P(tt(x))},null,4)),64))],4)),64))]),t("div",Ue,[(n(),u(I,null,V(50,o=>t("div",{class:"confetti-piece",key:o,style:P(et(o))},null,4)),64))])])):S("",!0)])}}}),Le=Ut(qe,[["__scopeId","data-v-67f0527c"]]);export{Le as default};
